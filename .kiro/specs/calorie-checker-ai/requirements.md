# 要件文書

## 概要

カロリーチェッカー AI は、ユーザーが食事の写真を撮影するだけで、AI 画像認識技術を使用して自動的にカロリーを計算し、栄養情報を提供する Flutter アプリケーションです。健康管理とダイエットサポートを目的とし、日々の食事記録を簡単かつ正確に行えるようにします。

## 要件

### 要件 1: 食事写真の撮影と認識

**ユーザーストーリー:** ユーザーとして、食事の写真を撮影して、自動的に食材と料理を認識してもらいたい。手動入力の手間を省きたいから。

#### 受け入れ基準

1. WHEN ユーザーがカメラボタンをタップ THEN システムはカメラを起動 SHALL する
2. WHEN ユーザーが写真を撮影 THEN システムは AI 画像認識を実行 SHALL する
3. WHEN AI 認識が完了 THEN システムは認識された食材・料理のリストを表示 SHALL する
4. IF 認識精度が低い場合 THEN システムは手動修正オプションを提供 SHALL する

### 要件 2: カロリー計算と栄養情報表示

**ユーザーストーリー:** ユーザーとして、認識された食事のカロリーと栄養情報を正確に知りたい。健康管理のための正確な情報が必要だから。

#### 受け入れ基準

1. WHEN 食材・料理が認識された THEN システムは各項目のカロリーを計算 SHALL する
2. WHEN カロリー計算が完了 THEN システムは総カロリー数を表示 SHALL する
3. WHEN 栄養情報が要求された THEN システムはタンパク質、炭水化物、脂質の情報を表示 SHALL する
4. WHEN 分量が不明確な場合 THEN システムは標準的な分量を仮定し、調整オプションを提供 SHALL する

### 要件 3: 食事記録の保存と履歴管理

**ユーザーストーリー:** ユーザーとして、日々の食事記録を保存し、過去の履歴を確認したい。長期的な健康管理を行いたいから。

#### 受け入れ基準

1. WHEN ユーザーが記録保存ボタンをタップ THEN システムは食事データをローカルに保存 SHALL する
2. WHEN ユーザーが履歴画面を開く THEN システムは過去の食事記録を日付順に表示 SHALL する
3. WHEN ユーザーが特定の日付を選択 THEN システムはその日の詳細な食事記録を表示 SHALL する
4. WHEN ユーザーが記録を削除したい場合 THEN システムは削除確認後に記録を削除 SHALL する

### 要件 4: 日次・週次統計の表示

**ユーザーストーリー:** ユーザーとして、日次や週次のカロリー摂取量の統計を見たい。食事パターンを把握し、健康目標を達成したいから。

#### 受け入れ基準

1. WHEN ユーザーが統計画面を開く THEN システムは当日の総カロリー摂取量を表示 SHALL する
2. WHEN 週次統計が要求された THEN システムは過去 7 日間のカロリー推移をグラフで表示 SHALL する
3. WHEN 目標カロリーが設定されている場合 THEN システムは目標との差異を表示 SHALL する
4. IF 目標を超過している場合 THEN システムは警告メッセージを表示 SHALL する

### 要件 5: ユーザー設定とカスタマイズ

**ユーザーストーリー:** ユーザーとして、個人の身体情報や目標を設定して、パーソナライズされた情報を得たい。より正確で有用なアドバイスが欲しいから。

#### 受け入れ基準

1. WHEN ユーザーが初回起動時 THEN システムは基本情報（年齢、性別、身長、体重）の入力を要求 SHALL する
2. WHEN 基本情報が入力された THEN システムは推奨カロリー摂取量を計算 SHALL する
3. WHEN ユーザーが目標を設定 THEN システムは目標に応じたアドバイスを提供 SHALL する
4. WHEN 設定変更が行われた THEN システムは新しい設定に基づいて計算を更新 SHALL する

### 要件 6: オフライン機能とデータ同期

**ユーザーストーリー:** ユーザーとして、インターネット接続がない環境でもアプリを使用したい。いつでもどこでも食事記録を取りたいから。

#### 受け入れ基準

1. WHEN インターネット接続がない場合 THEN システムは基本的な機能をオフラインで提供 SHALL する
2. WHEN オフラインで記録が作成された THEN システムはローカルに一時保存 SHALL する
3. WHEN インターネット接続が復旧した THEN システムは自動的にデータを同期 SHALL する
4. IF 同期エラーが発生した場合 THEN システムはエラー通知と再試行オプションを提供 SHALL する
